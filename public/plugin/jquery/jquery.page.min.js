(function(b){var a={pageIndex:"currentPage",pageSize:"pageSize",total:"total",totalPage:"totalPages"};b.fn.createPage=function(e){var d=b.extend({splitCount:5,pageSize:10,pageIndex:0,pageBodyCls:"",pageCodeCls:"",params:{},isPage:true,begin:function(){},end:function(){},callback:function(){}},e);var c={isFirst:true,autoLoad:true,url:"",ajaxType:"post",splitCount:3,pageParams:{},Events:{begin:function(){},end:function(){},callback:function(){}},init:function(f,h){var i=this;i.url=h.url;if(h.autoLoad){i.autoLoad=h.autoLoad}if(h.ajaxType){this.ajaxType=h.ajaxType}if(h.splitCount){i.splitCount=h.splitCount}for(var g in a){i.pageParams[a[g]]=0}if(typeof h==="object"){for(var g in i.pageParams){if(h[g]!==undefined){i.pageParams[g]=h[g]}}}if(typeof h.params==="object"){for(var g in h.params){if(h.params[g]!==undefined){i.pageParams[g]=h.params[g]}}}else{if(typeof h.params==="function"){var j=h.params();for(var g in j){if(j[g]!==undefined){i.pageParams[g]=j[g]}}}}if(typeof i==="object"){for(var g in i.Events){if(h[g]!==undefined&&i.Events[g]){i.Events[g]=h[g]}}}i.config=h;this.$element=f;this.$pageBodyElement=h.pageBodyCls?f.find(h.pageBodyCls):f.find(".page-body");this.$pageCodeElement=h.pageCodeCls?f.find(h.pageCodeCls):f.find(".page-code");this.bindEvent(h);if(i.autoLoad){this.ajaxLoad({})}return this},ajaxLoad:function(h){var g=this;var f=b.extend(g.pageParams,h);this.Events.begin();b.ajax({url:this.url,dataType:"json",data:f,type:g.ajaxType,success:function(i){if(g.Events.callback){g.update(i);g.Events.callback.call(g,i,g.$pageBodyElement);if(g.isFirst){g.$pageBodyElement.css({"min-height":g.$pageBodyElement.height()});g.isFirst=false}var j=g.$element.height();var k=g.$pageCodeElement.outerHeight();g.$pageBodyElement.parents(".panel-body").scrollTop(0)}g.Events.end.call(g)},error:function(i,k,j){console.error(j);g.Events.call(g)}})},getInterval:function(){var h=Math.ceil(this.splitCount/2);var g=this.pageParams[a.totalPage]-this.splitCount;var i=this.pageParams[a.pageIndex]>=h?Math.max(Math.min(this.pageParams[a.pageIndex]-h,g),0):0;var f=this.pageParams[a.pageIndex]>=h?Math.min(this.pageParams[a.pageIndex]+h,this.pageParams[a.totalPage]):Math.min(this.splitCount,this.pageParams[a.totalPage]);return[i,f]},addmeItem:function(f){if(f!=this.pageParams[a.pageIndex]){this.$pageCodeElement.append('<a href="javascript:;" class="tcdNumber" data-index='+f+" >"+(f+1)+"</a>")}else{this.$pageCodeElement.append('<span class="current" data-index='+f+">"+(f+1)+"</span>")}},update:function(j){if(!this.config.isPage){return}this.$pageCodeElement.empty();this.pageParams[a.pageIndex]=parseInt(j[a.pageIndex])-1;this.pageParams[a.total]=parseInt(j[a.total]);this.pageParams[a.totalPage]=parseInt(this.pageParams[a.total]/this.pageParams[a.pageSize])+1;if((this.pageParams[a.totalPage]-1)*this.pageParams[a.pageSize]==this.pageParams[a.total]){this.pageParams[a.totalPage]-=1}if(this.pageParams[a.total]==0){this.pageParams[a.totalPage]=0}if(this.pageParams[a.pageIndex]>this.pageParams[a.totalPage]-1){this.pageParams[a.pageIndex]=this.pageParams[a.totalPage]-1}if(this.pageParams[a.pageIndex]<=0){this.pageParams[a.pageIndex]=0}if(this.pageParams[a.totalPage]<=0){this.pageParams[a.totalPage]=0}var h=this.getInterval();var m=1;if(h[0]>0){var g=Math.min(m,h[0]);for(var k=0;k<g;k++){this.addmeItem(k)}if(m<h[0]){this.$pageCodeElement.append("<span>...</span>")}}for(var k=h[0];k<=h[1];k++){if(k<this.pageParams[a.totalPage]){this.addmeItem(k)}}if(h[1]+1<this.pageParams[a.totalPage]){if(this.pageParams[a.totalPage]-m>h[1]){this.$pageCodeElement.append("<span>...</span>")}var l=Math.max(this.pageParams[a.totalPage]-m,h[1]);for(var k=l;k<this.pageParams[a.totalPage];k++){this.addmeItem(k)}}if(this.pageParams[a.pageIndex]==0){}if(this.pageParams[a.pageIndex]>=this.pageParams[a.totalPage]-1){}var f=this.pageParams[a.pageIndex]>-1?this.pageParams[a.pageIndex]+1:0;if(this.pageParams[a.total]==0){f=0}},bindEvent:function(g){var h=this;var f=h.$pageCodeElement.find("a.tcdNumber");h.$pageCodeElement.on("click","a.tcdNumber",function(){var i=parseInt(b(this).data("index"));var j={};j[a.pageIndex]=(i+1);h.ajaxLoad(j,g)});h.$pageCodeElement.on("click","a.prevPage",function(){var i=parseInt(b(f).data("index"));var j={};j[a.pageIndex]=(i+1)-1;h.ajaxLoad(j,g)});h.$pageCodeElement.on("click","a.nextPage",function(){var i=parseInt(b(f).data("index"));var j={};j[a.pageIndex]=(i+1)+1;h.ajaxLoad(j,g)})}};return c.init(this,d)}})(jQuery);