(function(b){function a(d,c){this.option={min:0,max:60,decimal:0,value:1,onChange:function(e){}};b.extend(this.option,c);this.locked=false;this.value=this.option.value;this.oldValue=this.option.value;this.$dom=d;this.init()}a.prototype={init:function(){this.$SliderBody=b('<div class="slider-body"></div>');this.$SliderHandle=b('<span class="slider-handle"></span>');this.$SliderRange=b('<div class="slider-range"></div>');this.$SliderText=b('<span class="slider-text">22</span>');this.$SliderBody.append(this.$SliderHandle).append(this.$SliderRange).append(this.$SliderText);this.$dom.append(this.$SliderBody);this.scale=(this.option.max-this.option.min)/this.$SliderBody.width();var c=(this.value-this.option.min)/this.scale;this.moveHandle(c);this.events()},events:function(){this.$SliderHandle.on("mousedown.slider",(this.slide).bind(this))},slide:function(e){var d=this;if(d.locked){return}d.locked=true;e.preventDefault();e.stopPropagation();var c=e.clientX;mouseMoveCallback=(function(f){var h=f.clientX-c;c=f.clientX;var g;if(h>0){g="enlarge"}else{g="narrow"}d.moveChange(h,g)}).bind(d);mouseUpCallback=(function(f){if(f.type==="mouseout"&&f.target!==f.currentTarget){return}f.preventDefault();f.stopPropagation();b(document).off(".slider");d.locked=false}).bind(d);b(document).on("mousemove.slider",mouseMoveCallback);b(document).on("touchmove.slider",mouseMoveCallback);b(document).on("mouseup.slider",mouseUpCallback);b(document).on("touchend.slider",mouseUpCallback);b(document).on("touchcancel.slider",mouseUpCallback);b(document).on("mouseout.slider",mouseUpCallback)},moveHandle:function(f){var c=this;var d=this.$SliderHandle.position().left;var e=this.option.min+this.scale*(d+f);if(e>=this.option.max){e=this.option.max;d=c.$SliderBody.width()}else{if(e<=this.option.min){e=this.option.min;d=0}else{d+=f}}this.$SliderHandle.css({left:d});this.$SliderText.css({left:d-this.$SliderText.width()/2});this.$SliderRange.width(d);return e},moveChange:function(e,d){var c=this.moveHandle(e);if(this.value!=this.oldValue){this.value=this.fixValue(c),d;this.$SliderText.html(this.value);this.option.onChange(this.value,d)}this.oldValue=this.fixValue(c)},fixValue:function(c){return parseFloat(c).toFixed(this.option.decimal||0)},setValue:function(d){var c=this.getValue();d=parseFloat(d);if(d>=this.option.max){this.value=this.option.max}else{if(d<=this.option.min){this.value=this.option.min}else{this.value=d}}var e=(this.value-c)/this.scale;this.moveHandle(e);this.$SliderText.html(this.value)},getValue:function(){return this.value}};window.Slider=a})(jQuery);