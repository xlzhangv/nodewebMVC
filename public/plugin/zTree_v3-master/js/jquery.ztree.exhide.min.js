(function(e){var j={data:{key:{isHidden:"isHidden"}}};var t=function(z,D,C,w,B,x,A){var y=u.isHidden(z,C);u.isHidden(z,C,y);u.initHideForExCheck(z,C)},a=function(x,y,w){},i=function(y,x){x.showNodes=function(z,A){h.showNodes(y,z,A)};x.showNode=function(A,z){if(!A){return}h.showNodes(y,[A],z)};x.hideNodes=function(z,A){h.hideNodes(y,z,A)};x.hideNode=function(A,z){if(!A){return}h.hideNodes(y,[A],z)};var w=x.checkNode;if(w){x.checkNode=function(B,A,C,z){if(!!B&&!!u.isHidden(y,B)){return}w.apply(x,arguments)}}},l={initHideForExCheck:function(x,y){var w=u.isHidden(x,y);if(w&&x.check&&x.check.enable){if(typeof y._nocheck=="undefined"){y._nocheck=!!y.nocheck;y.nocheck=true}y.check_Child_State=-1;if(h.repairParentChkClassWithSelf){h.repairParentChkClassWithSelf(x,y)}}},initShowForExCheck:function(y,z){var w=u.isHidden(y,z);if(!w&&y.check&&y.check.enable){if(typeof z._nocheck!="undefined"){z.nocheck=z._nocheck;delete z._nocheck}if(h.setChkClass){var x=g(z,m.id.CHECK,y);h.setChkClass(y,x,z)}if(h.repairParentChkClassWithSelf){h.repairParentChkClassWithSelf(y,z)}}}},c={clearOldFirstNode:function(w,x){var y=x.getNextNode();while(!!y){if(y.isFirstNode){y.isFirstNode=false;h.setNodeLineIcos(w,y);break}if(y.isLastNode){break}y=y.getNextNode()}},clearOldLastNode:function(w,x,y){var z=x.getPreNode();while(!!z){if(z.isLastNode){z.isLastNode=false;if(y){h.setNodeLineIcos(w,z)}break}if(z.isFirstNode){break}z=z.getPreNode()}},makeDOMNodeMainBefore:function(x,y,z){var w=u.isHidden(y,z);x.push("<li ",(w?"style='display:none;' ":""),"id='",z.tId,"' class='",m.className.LEVEL,z.level,"' tabindex='0' hidefocus='true' treenode>")},showNode:function(x,y,w){u.isHidden(x,y,false);u.initShowForExCheck(x,y);g(y,x).show()},showNodes:function(E,w,F){if(!w||w.length==0){return}var z={},C,B;for(C=0,B=w.length;C<B;C++){var y=w[C];if(!z[y.parentTId]){var A=y.getParentNode();z[y.parentTId]=(A===null)?u.getRoot(E):y.getParentNode()}h.showNode(E,y,F)}for(var D in z){var x=u.nodeChildren(E,z[D]);h.setFirstNodeForShow(E,x);h.setLastNodeForShow(E,x)}},hideNode:function(x,y,w){u.isHidden(x,y,true);y.isFirstNode=false;y.isLastNode=false;u.initHideForExCheck(x,y);h.cancelPreSelectedNode(x,y);g(y,x).hide()},hideNodes:function(E,w,F){if(!w||w.length==0){return}var z={},C,B;for(C=0,B=w.length;C<B;C++){var y=w[C];if((y.isFirstNode||y.isLastNode)&&!z[y.parentTId]){var A=y.getParentNode();z[y.parentTId]=(A===null)?u.getRoot(E):y.getParentNode()}h.hideNode(E,y,F)}for(var D in z){var x=u.nodeChildren(E,z[D]);h.setFirstNodeForHide(E,x);h.setLastNodeForHide(E,x)}},setFirstNode:function(z,w){var y=u.nodeChildren(z,w);var x=u.isHidden(z,y[0],false);if(y.length>0&&!x){y[0].isFirstNode=true}else{if(y.length>0){h.setFirstNodeForHide(z,y)}}},setLastNode:function(z,w){var y=u.nodeChildren(z,w);var x=u.isHidden(z,y[0]);if(y.length>0&&!x){y[y.length-1].isLastNode=true}else{if(y.length>0){h.setLastNodeForHide(z,y)}}},setFirstNodeForHide:function(A,w){var B,z,x;for(z=0,x=w.length;z<x;z++){B=w[z];if(B.isFirstNode){break}var y=u.isHidden(A,B);if(!y&&!B.isFirstNode){B.isFirstNode=true;h.setNodeLineIcos(A,B);break}else{B=null}}return B},setFirstNodeForShow:function(B,x){var D,A,y,C,w;for(A=0,y=x.length;A<y;A++){D=x[A];var z=u.isHidden(B,D);if(!C&&!z&&D.isFirstNode){C=D;break}else{if(!C&&!z&&!D.isFirstNode){D.isFirstNode=true;C=D;h.setNodeLineIcos(B,D)}else{if(C&&D.isFirstNode){D.isFirstNode=false;w=D;h.setNodeLineIcos(B,D);break}else{D=null}}}}return{"new":C,old:w}},setLastNodeForHide:function(z,w){var A,y;for(y=w.length-1;y>=0;y--){A=w[y];if(A.isLastNode){break}var x=u.isHidden(z,A);if(!x&&!A.isLastNode){A.isLastNode=true;h.setNodeLineIcos(z,A);break}else{A=null}}return A},setLastNodeForShow:function(B,x){var D,A,y,C,w;for(A=x.length-1;A>=0;A--){D=x[A];var z=u.isHidden(B,D);if(!C&&!z&&D.isLastNode){C=D;break}else{if(!C&&!z&&!D.isLastNode){D.isLastNode=true;C=D;h.setNodeLineIcos(B,D)}else{if(C&&D.isLastNode){D.isLastNode=false;w=D;h.setNodeLineIcos(B,D);break}else{D=null}}}}return{"new":C,old:w}}},p={view:c,data:l};e.extend(true,e.fn.zTree._z,p);var b=e.fn.zTree,s=b._z.tools,m=b.consts,h=b._z.view,u=b._z.data,q=b._z.event,g=s.$;u.isHidden=function(x,y,z){if(!y){return false}var w=x.data.key.isHidden;if(typeof z!=="undefined"){if(typeof z==="string"){z=s.eqs(checked,"true")}z=!!z;y[w]=z}return y[w]};u.exSetting(j);u.addInitNode(t);u.addBeforeA(a);u.addZTreeTools(i);var d=u.initNode;u.initNode=function(E,w,A,B,D,C,y){var z=(B)?B:u.getRoot(E),x=z[E.data.key.children];u.tmpHideFirstNode=h.setFirstNodeForHide(E,x);u.tmpHideLastNode=h.setLastNodeForHide(E,x);if(y){h.setNodeLineIcos(E,u.tmpHideFirstNode);h.setNodeLineIcos(E,u.tmpHideLastNode)}D=(u.tmpHideFirstNode===A);C=(u.tmpHideLastNode===A);if(d){d.apply(u,arguments)}if(y&&C){h.clearOldLastNode(E,A,y)}};var r=u.makeChkFlag;if(!!r){u.makeChkFlag=function(w,x){if(!!x&&!!u.isHidden(w,x)){return}r.apply(u,arguments)}}var f=u.getTreeCheckedNodes;if(!!f){u.getTreeCheckedNodes=function(y,w,z,x){if(!!w&&w.length>0){var A=w[0].getParentNode();if(!!A&&!!u.isHidden(y,A)){return[]}}return f.apply(u,arguments)}}var n=u.getTreeChangeCheckedNodes;if(!!n){u.getTreeChangeCheckedNodes=function(y,w,x){if(!!w&&w.length>0){var z=w[0].getParentNode();if(!!z&&!!u.isHidden(y,z)){return[]}}return n.apply(u,arguments)}}var o=h.expandCollapseSonNode;if(!!o){h.expandCollapseSonNode=function(w,x,z,y,A){if(!!x&&!!u.isHidden(w,x)){return}o.apply(h,arguments)}}var v=h.setSonNodeCheckBox;if(!!v){h.setSonNodeCheckBox=function(w,x,y,z){if(!!x&&!!u.isHidden(w,x)){return}v.apply(h,arguments)}}var k=h.repairParentChkClassWithSelf;if(!!k){h.repairParentChkClassWithSelf=function(w,x){if(!!x&&!!u.isHidden(w,x)){return}k.apply(h,arguments)}}})(jQuery);